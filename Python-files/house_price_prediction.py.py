# -*- coding: utf-8 -*-
"""Mullti collinearity useing VIF.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1Pgzm0QmYFIj5Myb2W0d5SZ1gHF-_npeK
"""

#Read Data
import pandas as pd
data= pd.read_csv('https://trello-attachments.s3.amazonaws.com/5f083c31f5989959af0a86e1/5f083c4b69aef3831672e7b4/c7d1b1f0414ab051c629f08775b54e2f/Housing_Modified_prepared.csv')
# choose Independent and Dependent variabel
Y=data["price"]
independent_variabels=data.columns
independent_variabels=independent_variabels.delete(0)
X=data[independent_variabels]

#Fire the  ordinary least squaRE regression model
import statsmodels.api as sm
model=sm.OLS(Y,X)
#Train the model
model= model.fit()
#check the model summary
model.summary()

# now we are going to calculate Variance influence factor(VIF)
from statsmodels.stats.outliers_influence import variance_inflation_factor as vif 
for i in range(len(independent_variabels)):
  vif_list=[vif(data[independent_variabels].values,index)for index in range(len(independent_variabels))]
  mvif = max(vif_list)
  #print("Max VIF value is", mvif)
  drop_index=vif_list.index(mvif)
  #print("For the independent variabels", independent_variabels[drop_index])
  if mvif>10:
  
   # print("Deleting", independent_variabels[drop_index])
    independent_variabels= independent_variabels.delete(drop_index)
  #print("Final Independent Variabels", independent_variabels)

Y=data["price"]
X=data[independent_variabels]
model=sm.OLS(Y,X)
model=model.fit()
model.summary()

# Now going to make solution 
import sys
index=1
user_input = {}
for var in independent_variabels :
 # temp= input("Enter " +var+ ":")
  temp = sys.argv[index]
  index = index + 1
  user_input[var] = temp
user_df=pd.DataFrame(data=user_input,index=[0], columns=independent_variabels)
import sklearn.linear_model as lm
lr=lm.LinearRegression()
lr.fit(X, Y)
price= lr.predict(user_df)
print("House Price is in USD", int(price[0]))

